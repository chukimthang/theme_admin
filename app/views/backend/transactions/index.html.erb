<%= render partial: "backend/shared/alert" %>
<div class="clearfix"></div>

<section class="content listing-wrapper" id="transaction-listing">
  <div class="box">
    <div class="col-md-12 page-header">
      <h3 class="pull-left">List Transaction</h3>
      <div class="pull-right">
        <%= link_to "Add", new_admin_group_transaction_path, 
          class: "btn btn-primary" %>
      </div>
    </div>

    <div class="box-body">
      <table class="table table-bordered listing-table">
        <thead>
        <tr>
          <th class="col-md-1">Index</th>
          <th>Amount</th>
          <th>Description</th>
          <th>Created at</th>
          <th class="col-md-1">Action</th>
        </tr>
        </thead>
        <tbody>
        <% @transactions.each_with_index do |transaction, index| %>
          <tr>
            <td><%= index + 1 %></td>
            <td>
              <% number = number_to_currency(transaction.amount, unit: "Ä‘ ") %>
              <% if transaction.expense? %>
                <span class="expense">- <%= number %></span>
              <% else %>
                <span class="income">+ <%= number %></span>
              <% end %>
            </td>
            <td><%= transaction.description %></td>
            <td><%= format_to_only_date transaction.created_at %></td>
            <td>
              <%= link_to edit_admin_group_transaction_path(group_id: transaction.group_id,
                id: transaction.id), class: "action-icon edit" do %>
                <span class="fa fa-edit"></span>
              <% end %>
              <%= link_to "#modal-delete", class: "action-icon remove",
                data: {toggle: "modal", url: "/admin/groups/#{transaction.group_id}/transactions/#{transaction.id}"} do %>
                <span class="fa fa-remove"></span>
              <% end %>
            </td>
          </tr>
        <% end %>
        </tbody>
      </table>

      <div class="text-center">
        <%= paginate @transactions, theme: "twitter-bootstrap-3" %>
      </div>
    </div>
  </div>
</section>

<%= render partial: "backend/shared/delete", locals: {model_name: "Transaction"} %>
